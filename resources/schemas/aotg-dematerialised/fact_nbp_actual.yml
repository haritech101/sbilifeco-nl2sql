cubes:
    - name: fact_nbp_actual
      sql_table: fact_nbp_actual
      public: true
      description: New business premium collected / sold / earned.

      measures:
          - name: nbp
            sql: nbp
            type: number
            description: Unrated / actual new business premium sold. Use this field when the word 'actual nbp' is mentioned in the question. Conversely, DO NOT use this field when the word 'actual' does not accompany the metric in the question. In case of even a little doubt, use the value in 'rated_nbp' rather than the value of this field. For comparison between actuals and budget operations, this field must be paired with the budget's actual nbp field. The use of WITH SQL expression for such paired query is recommended.

          - name: rated_nbp
            sql: rated_nbp
            type: number
            description: Rated new business premium sold. Use this field when the word 'actual' is not used in the question. The word IRP also refers to this field. Also use this rated version when achievement or shortfall don't specifically mention the word 'actual'. When in even the least doubt, this should be the default value and not the value in 'nbp' field. For comparison between actuals and budget operations, this field must be paired with the budget's rated_nbp field. The use of WITH SQL expression for such paired query is recommended.

          - name: nbp_gross
            sql: nbp_gross
            type: number
            description: Actual Gross Written Premium or actual GWP. Use this field when the word 'actual gwp' is used in the question.

          - name: rated_nbp_gross
            sql: rated_nbp_gross
            type: number
            description: Rated Gross Written Premium or rated GWP. Use this field by default when the word 'actual' is not used in the question.

      dimensions:
          - name: nbp_actual_id
            sql: nbp_actual_id
            type: number
            description: Primary key identifying each transaction where new business premium was collected

          - name: region_id
            sql: region_id
            type: number
            description: A region from dim_region from which premium was collected. Always use this field when joining actuals table with budget table.

          - name: sub_channel_id
            sql: sub_channel_id
            type: number
            description: A sales sub channel from dim_sub_channel through which the policy was sold. Always use this field when joining actuals table with budget table.

          - name: policy_id
            sql: policy_id
            type: number
            description: The ID of the policy that led to the premium collected. When pairing actuals with budget, the policy's product_id (via policy table) needs to be joined with the budget's product_id.

          - name: date
            sql: date
            type: time
            description: The date on which the premium was collected. Queries will often seek transactions within a certain range of dates. Queries with future month and year are not supported. Those should lead to an error.
