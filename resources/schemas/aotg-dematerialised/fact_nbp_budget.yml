cubes:
    - name: fact_nbp_budget
      sql_table: fact_nbp_budget
      description: Budget for new business premium (NBP). Each row contains a budget across several dimensions.
      public: true

      joins:
          - name: dim_product
            relationship: many_to_one
            sql: "{CUBE}.product_id = {dim_product}.product_id"
          - name: dim_sub_channel
            relationship: many_to_one
            sql: "{CUBE}.sub_channel_id = {dim_sub_channel}.subchannel_id"
          - name: dim_region
            relationship: many_to_one
            sql: "{CUBE}.region_id = {dim_region}.region_id"

      measures:
          - name: nbp
            sql: nbp
            type: number
            description: Unrated or actual new business premium. Use this value when the question specifically uses the word 'actual' NBP. Conversely, DO NOT use when the question does not use the word 'actual' alongside the metric. In case of the tiniest doubt, use the value of 'rated_nbp'. Use a pro-rated value when comparing with actuals table.

          - name: rated_nbp
            sql: rated_nbp
            type: number
            description: Rated new business premium. Use this as the default when the word 'actual' is not mentioned. Also use this rated version for achievement and shortfall, unless the word 'actual' is mentioned for those measures. In case of the tiniest doubt, use this value instead of the value of 'nbp' field. Use a pro-rated value when comparing with actuals table.

      dimensions:
          - name: nbp_budget_id
            sql: nbp_budget_id
            type: number
            primary_key: true
            public: true
            description: Primary key that identifies each line of budget

          - name: product_id
            sql: product_id
            type: number
            description: A product from dim_product for which the budget is being set. Always use this field when joining actuals table with budget table.

          - name: sub_channel_id
            sql: sub_channel_id
            type: number
            description: A sub-channel from dim_sub_channel for which the budget is being set. Always use this field when joining actuals table with budget table.

          - name: region_id
            sql: region_id
            type: number
            description: The region from dim_region for which the budget is being set. Always use this field when joining actuals table with budget table.

          - name: current_flag
            sql: current_flag
            type: number
            description: A numeric value 0 or 1, that indicates whether the budget is for the current financial year. It is mandatory to use this field as a condition in any query that requires the budget table. Note that there are no fields with dates in budget data.
